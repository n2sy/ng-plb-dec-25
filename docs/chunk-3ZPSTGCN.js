import{a as v}from"./chunk-3MU7DCIA.js";import{h as L}from"./chunk-UDCBYCK5.js";import{a as S,c as V,d as E,f as k,h as y,i as M,n as N,o as F,p as T,r as D}from"./chunk-QRJ4QUDI.js";import"./chunk-RHMWU7U6.js";import{Fa as g,Ja as d,Na as o,Oa as r,Pa as b,Qa as h,Ta as c,U as f,Ua as u,W as w,Ya as p,Za as l,da as s,ea as m,fb as x,va as C}from"./chunk-XJE2RIN6.js";function P(i,t){i&1&&(o(0,"div",2),l(1,"Login et/ou mot de passe erron\xE9s"),r())}function R(i,t){i&1&&(o(0,"div",2),l(1,"Veuillez saisir une adresse mail valide"),r())}function q(i,t){if(i&1){let e=h();o(0,"button",8),c("click",function(){s(e);let n=u(),_=p(2);return m(n.submitHandler(_))}),l(1," Se connecter "),r(),o(2,"button",9),c("click",function(){s(e);let n=u();return m(n.toggleShowLogin())}),l(3," Aller \xE0 Register "),r()}}function H(i,t){if(i&1){let e=h();o(0,"button",10),c("click",function(){s(e);let n=u(),_=p(2);return m(n.submitHandler(_))}),l(1," S'inscrire "),r(),o(2,"button",11),c("click",function(){s(e);let n=u();return m(n.toggleShowLogin())}),l(3," Aller \xE0 Login "),r()}}var A=class i{languages=["","java","python","php"];defaultLanguage="php";monCommentaire="Rien \xE0 signaler...";showLogin=!0;showError=!1;authSer=f(v);router=f(L);submitHandler(t){this.showLogin?this.authSer.seConnecter(t.value).subscribe({next:e=>{alert(e.message),localStorage.setItem("access_token",e.token),this.router.navigateByUrl("/cv")},error:e=>{this.showError=!0,t.setValue({email:"",password:""})}}):this.authSer.inscription(t.value).subscribe({next:e=>{alert(e.message),this.toggleShowLogin()},error:e=>{console.log(e)}})}toggleShowLogin(){this.showLogin=!this.showLogin}genererMotDePasse(t){t.form.patchValue({password:"motdepasse123"})}resetForm(t){t.reset()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=w({type:i,selectors:[["app-login"]],standalone:!0,features:[x],decls:16,vars:3,consts:[["f","ngForm"],["inpLogin","ngModel"],[1,"alert","alert-danger"],["for",""],["ngModel","","required","","email","","name","email","type","text",1,"form-control"],["ngModel","","required","","minlength","4","name","password","type","text",1,"form-control"],[1,"row"],[1,"col-6","offset-4"],["type","submit",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-warning",3,"click"],["type","submit",1,"btn","btn-dark",3,"click"],["type","button",1,"btn","btn-info",3,"click"]],template:function(e,a){if(e&1&&(g(0,P,2,0,"div",2),o(1,"form",null,0)(3,"label",3),l(4,"Nom d'utilisateur"),r(),b(5,"input",4,1),g(7,R,2,0,"div",2),o(8,"label",3),l(9,"Mot de passe"),r(),b(10,"input",5)(11,"br"),o(12,"div",6)(13,"div",7),g(14,q,4,0)(15,H,4,0),r()()()),e&2){let n=p(6);d(a.showError?0:-1),C(7),d(n.invalid&&n.dirty&&n.value.length>1?7:-1),C(7),d(a.showLogin?14:15)}},dependencies:[D,M,S,V,E,N,T,F,y,k],styles:[".ng-invalid.ng-dirty[_ngcontent-%COMP%]{border-color:red}.ng-valid[_ngcontent-%COMP%]{border-color:green}"]})};export{A as LoginComponent};
